---
title: "AR.jsのマーカー型WebARアプリ開発でTypeScriptを使う"
emoji: "🏖️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["arjs", "typescript", "webar", "threejs", "web"]
published: false
---

# はじめに

## TL;DR

## 概要と対象読者

タイトルの通りですが、本記事では AR.js を使った WebAR アプリのコードを TypeScript で書く記事です。
筆者は WebAR を使ったデモでは Babylon.js＋WebXR Device API という構成を使いがちなのですが、
幅広いデバイス・ブラウザの対応が必要になったときは別の技術を採用する必要があります。
先日、JAXA 筑波宇宙センターにて WebAR アプリを展示することになったのですが、
その際にはお客さんの端末で実行してもらう必要がありました。
そこで普段使わない Three.js＋AR.js という技術スタックでの開発に入門してみたところ、
TypeScript を使った記事が見つからず苦労したので、色々試してみた知見を共有しようと考えました。

https://twitter.com/ninisan_drumath/status/1729500259376873495

本記事では AR.js や Three.js、TypeScript、Web 開発についてある程度知っている人向けに解説しています。
そこまで深い知識は必要ありませんが、基礎的な部分の解説はしませんのでご了承ください。

## 検証環境

- Windows 10 Home
- Node.js 20.x
- pnpm 8.x
- Three.js 0.159.0
- @ar-js-org/ar.js-threejs 0.2.0

## サンプル

本記事の内容に沿って実装したサンプルを GitHub にて公開しておりますので、ご参考になさってください。

https://github.com/drumath2237/arjs-typescript-sample

# AR.jsをTypeScriptで使ってみる

## AR.jsについて

AR.js は Three.js ベースの WebAR ライブラリです。
https://ar-js-org.github.io/AR.js-Docs/
内部的に ARToolkit が使われており、計量でインスタントな WebAR を実現するために重宝されています。
WebAR ライブラリの 8thwall や Zapworks と比べて 6DoF コンテンツを創るのには向いていないものの、無料で使えるのが良い点です（Zapworks は非商用であれば無料ですが）。
A-Frame と組み合わせることでコンテンツの配置を HTML で行えるため、とても手軽に開発できます。

## AR.js開発体験向上を目指して

<!-- typescriptを使うことのメリット -->

前述のように AR.js は手軽に扱えるというメリットがあります。
しかしそのようなメリットがあるプラットフォームではありがちなのですが、しっかりとした開発体験を求めようとすると心もとないケースが多いです。具体的には AR.js 本体が JavaScript ベースで書かれており、エディタによる型補完が効かなくてツラいです。実際 AR.js は HTML に CDN 経由で読み込んで使ったり A-Frame と組み合わせる例が多いようです。
https://github.com/AR-js-org/AR.js

筆者は普段 Babylon.js という Full-TypeScript-Supported な環境で開発をしているため型が無い環境でコーディングをすることに抵抗感があり、どうしても TypeScript が使いたいと考えていました。
一見 TypeScript を導入すると JavaScript 自体の手軽さを阻害してしまいかえって開発スピードを落とすのではないかという意見もありますが、コンパイルエラーの検知や高度な補完によって、正確さとスピードを両立できるのです。

## `@ar-js-org/ar.js-three.js`について

## 導入と使い方

# おわりに

## まとめ

## 参考文献
